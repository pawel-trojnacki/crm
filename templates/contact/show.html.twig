{% extends "base.html.twig" %}

{% set page_title = contact.firstName ~ ' ' ~ contact.lastName %}

{% block title %} {{page_title | title}}  {% endblock %}

{% block body %}

{{ include('layout/_heading.html.twig', {
    title: page_title
}) }}

<div class="row">

    <div class="col-8">

        {% if contact.contactNotes | length > 0 %}
        <ul class="list-group">
            {% for note in contact.contactNotes | sort((a, b) => a.createdAt < b.createdAt) %}
                <li class="list-group-item p-md-3">
                    <h3 class="mb-1 fs-6 fw-bold">By John Doe {{note.createdAt | ago}}</h3>
                    <p class="mb-1">{{ note.content }}</p>
                </li>
            {% endfor %}
        </ul>
        {% endif %}

    </div>

    <section class="col-4">
        <h2 class="fs-3 fw-bold mb-3">Info</h2>
        <ul class="list-group">
            <li class="list-group-item">
                Email: <span class="fw-bold">{{contact.email}}</span>
            </li>
            <li class="list-group-item">
                Phone: <span class="fw-bold">{{contact.phone}}</span>
            </li>
            {% if contact.company %}
            <li class="list-group-item">
                Company: <span class="fw-bold">{{contact.company.name}}</span>
            </li>
            {% endif %}
            {% if contact.position %}
            <li class="list-group-item">
                Position: <span class="fw-bold">{{contact.position}}</span>
            </li>
            {% endif %}
            <div class="d-flex justify-content-end my-3">
                <div class="me-2">
                    <a href="{{ path('app_contact_edit', {slug: contact.slug}) }}"
                        class="btn btn-primary">
                        Edit
                    </a>
                </div>
                <div>
                    <form action="" method="POST">
                        <input type="submit" value="Delete" name="delete" class="btn btn-danger">
                    </form>
                </div>
            </div>
        </ul>
    </section>

</div>

{% endblock %}